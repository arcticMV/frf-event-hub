# Firebase App Hosting Configuration
runtime: nodejs20

# Environment configuration
env:
  - variable: NODE_ENV
    value: production
  - variable: FIREBASE_PROJECT_ID
    value: ${PROJECT_ID}
    availability:
      - BUILD
      - RUNTIME
  - variable: FIREBASE_CLIENT_EMAIL
    availability:
      - RUNTIME
    secret: firebase-client-email
  - variable: FIREBASE_PRIVATE_KEY
    availability:
      - RUNTIME
    secret: firebase-private-key
  # Next.js public environment variables for client-side Firebase
  - variable: NEXT_PUBLIC_FIREBASE_API_KEY
    secret: firebase-api-key
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    value: ${PROJECT_ID}.firebaseapp.com
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    value: ${PROJECT_ID}
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    value: ${PROJECT_ID}.firebasestorage.app
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    value: "160118131715"
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_APP_ID
    secret: firebase-app-id
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID
    value: G-YDNY57JXG8
    availability:
      - BUILD
      - RUNTIME

# CPU and memory configuration
cpu: 1
memoryMiB: 512
minInstances: 1
maxInstances: 10
concurrency: 100

# Build configuration
buildCommand: npm run build

# Service configuration
service:
  name: frf-event-hub
  region: europe-west4

# VPC connector (optional, for private IP access)
# vpcConnector:
#   name: projects/PROJECT_ID/locations/REGION/connectors/CONNECTOR_NAME

# Additional services
services:
  - firestore
  - storage
  - authentication